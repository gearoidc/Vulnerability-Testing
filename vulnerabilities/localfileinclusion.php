<?php

// Check if the document parameter is set, if it is then continue

if(!empty($_GET["document"]))
{
    $document = $_GET["document"];
    
    // Allow the user to download the document submitted

    $finfo = finfo_open(FILEINFO_MIME_TYPE);
    
    header('Content-Type: ' . finfo_file($finfo, $document));
    finfo_close($finfo);

    // Use Content-Disposition: attachment to specify the filename
    header('Content-Disposition: attachment; filename='.basename($document));

    // Define file size
    header('Content-Length: ' . filesize($document));

    ob_clean();
    flush();
    readfile($document);
   
    echo file_get_contents($document);
    exit;
}
?>

<html>
    <body>
        <h1>Document downloader</h1>
        <p>Here we have a list of documents, please click which document you would like to download.</p>
        <li><a href="?document=doc/document_1.txt">Document 1</a></li>
        <li><a href="?document=doc/document_2.txt">Document 2</a></li>
        <li><a href="?document=doc/document_3.txt">Document 3</a></li>
        <li><a href="?document=doc/document_4.txt">Document 4</a></li>
        <li><a href="?document=doc/document_5.txt">Document 5</a></li>
    </body>
</html>